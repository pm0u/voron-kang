[gcode_macro PARK_CENTER]
gcode:
  G28
  G90
  G0 Z30 F12000
  G0 X175 Y175 F12000
  
[gcode_macro HEATSOAK_CHAMBER]
gcode:
  {%- import message as msg -%}
  {% if params.CHAMBER_TEMP is defined and params.CHAMBER_TEMP|int != 0 %}
    {msg.info("Waiting for chamber to reach target temperature of %dÂ°C..." % params.CHAMBER_TEMP|int)}
    PARK_CENTER
    M106 S204
    SET_HEATER_TEMPERATURE heater=chamber target={params.CHAMBER_TEMP + 2}
    TEMPERATURE_WAIT SENSOR="heater_generic chamber" MINIMUM={ [ params.CHAMBER_TEMP|float * 0.98, params.CHAMBER_TEMP|float - 2.0 ] | min }
    {msg.info("Chamber has reached target temperature.")}
  {% endif %}