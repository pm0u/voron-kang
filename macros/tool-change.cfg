[gcode_macro UPDATE_TOOL_IO]
gcode:
  {%- set tool = params.T | int | default(-1)-%}
  {%- if tool > -1-%}
    {%- for t in printer.toolchanger.tool_numbers -%}
      SET_FILAMENT_SENSOR SENSOR=t{t}_filament ENABLED={ '1' if t == tool else '0' }
    {%- endfor -%}
  {%- endif -%}